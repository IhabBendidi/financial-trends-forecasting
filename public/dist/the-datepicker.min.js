var TheDatepicker;!function(n){var e=(t.prototype.setDayOfWeekTranslation=function(e,t){this.dayOfWeekTranslations[n.Helper.checkNumber("First day of week",e,0,6)]=n.Helper.checkString("Translation",t)},t.prototype.setMonthTranslation=function(e,t){this.monthTranslations[n.Helper.checkNumber("Month",e,0,11)]=n.Helper.checkString("Translation",t)},t.prototype.translateDayOfWeek=function(e){return this.dayOfWeekTranslations[e]},t.prototype.translateMonth=function(e){return this.monthTranslations[e]},t);function t(){this.dayOfWeekTranslations=["Su","Mo","Tu","We","Th","Fr","Sa"],this.monthTranslations=["January","February","March","April","May","June","July","August","September","October","November","December"]}n.Translator=e}(TheDatepicker=TheDatepicker||{}),function(e){var h=function(){};e.CannotParseDateException=h;var u=(t.prototype.createDate=function(){if(null===this.day||null===this.month||null===this.year)throw new h;var e=new Date(this.year,this.month-1,this.day);if(isNaN(e.getTime()))throw new h;for(;e.getDate()!==this.day||e.getMonth()!==this.month-1||e.getFullYear()!==this.year;){if(!(28<this.day))throw new h;this.day--,e=new Date(this.year,this.month-1,this.day)}return e},t);function t(){this.day=null,this.month=null,this.year=null}var n=(i.prototype.formatDate=function(e,t){for(var n=!1,i="",o=0;o<e.length;o++){var r=e.substring(o,o+1);if(n)i+=r,n=!1;else if(r!==this.escapeChar){var s=this.getFormatter(r);i+=null===s?r:s.call(this,t)}else n=!0}return i},i.prototype.parseDate=function(e,t){if(""===t)return null;for(var n=new u,i=!1,o=0,r=0;r<e.length;r++){var s=e.substring(r,r+1);if(i)i=!1;else{if(s===this.escapeChar){i=!0;continue}var a=this.getParser(s);if(null!==a){try{o+=a.call(this,t.substring(o),n)}catch(e){if(!(e instanceof h))throw e;if(" "!==t.substring(o,o+1))throw e;o++,r--;continue}continue}}var l=t.substring(o,o+1);if(l===s)o++;else{if(" "===s)continue;if(" "!==l)throw new h;o++,r--}}return n.createDate()},i.prototype.getFormatter=function(e){switch(e){case"j":return this.formatDay;case"d":return this.formatDayWithLeadingZero;case"D":return this.formatDayOfWeekTextual;case"n":return this.formatMonth;case"m":return this.formatMonthWithLeadingZero;case"F":return this.formatMonthTextual;case"Y":return this.formatYear;case"y":return this.formatYearTwoDigits;default:return null}},i.prototype.formatDay=function(e){return e.getDate()+""},i.prototype.formatDayWithLeadingZero=function(e){return("0"+e.getDate()).slice(-2)},i.prototype.formatDayOfWeekTextual=function(e){return this.options.translator.translateDayOfWeek(e.getDay())},i.prototype.formatMonth=function(e){return e.getMonth()+1+""},i.prototype.formatMonthWithLeadingZero=function(e){return("0"+(e.getMonth()+1)).slice(-2)},i.prototype.formatMonthTextual=function(e){return this.options.translator.translateMonth(e.getMonth())},i.prototype.formatYear=function(e){return e.getFullYear()+""},i.prototype.formatYearTwoDigits=function(e){var t=e.getFullYear()+"";return t.substring(t.length-2)},i.prototype.getParser=function(e){switch(e){case"j":case"d":return this.parseDay;case"D":return this.parseDayOfWeekTextual;case"n":case"m":return this.parseMonth;case"F":return this.parseMonthTextual;case"Y":return this.parseYear;case"y":return this.parseYearTwoDigits;default:return null}},i.prototype.parseDay=function(e,t){for(var n=0;"0"===e.substring(0,1);)e=e.substring(1),n++;var i=e.substring(0,2);if(!/[12][0-9]|3[01]/.test(i)&&(i=i.substring(0,1),!/[1-9]/.test(i)))throw new h;return t.day=parseInt(i,10),n+i.length},i.prototype.parseDayOfWeekTextual=function(e){for(var t=0,n=0;n<7;n++){var i=this.options.translator.translateDayOfWeek(n);if(t=Math.max(t,i.length),e.substring(0,i.length).toLowerCase()===i.toLowerCase())return i.length}for(var o=0;/[a-zA-Z]/.test(e.substring(0,1))&&(e=e.substring(1),++o!==t););return o},i.prototype.parseMonth=function(e,t){for(var n=0;"0"===e.substring(0,1);)e=e.substring(1),n++;var i=e.substring(0,2);if("10"!==i&&"11"!==i&&"12"!==i&&(i=i.substring(0,1),!/[1-9]/.test(i)))throw new h;return t.month=parseInt(i,10),n+i.length},i.prototype.parseMonthTextual=function(e,t){for(var n=1;n<=12;n++){var i=this.options.translator.translateMonth(n-1);if(e.substring(0,i.length).toLowerCase()===i.toLowerCase())return t.month=n,i.length}throw new h},i.prototype.parseYear=function(e,t){var n=!1;"-"===e.substring(0,1)&&(n=!0,e=e.substring(1));for(var i=0;/[0-9]/.test(e.substring(i,i+1));)i++;if(0===i)throw new h;var o=parseInt(e.substring(0,i),10);return n&&(o=-o),t.year=o,i+(n?1:0)},i.prototype.parseYearTwoDigits=function(e,t){var n=e.substring(0,2);if(!/[0-9]{2}/.test(n))throw new h;var i=this.options.getToday().getFullYear()+"",o=i.substring(0,i.length-2);return t.year=parseInt(o+n,10),2},i);function i(e){this.options=e,this.escapeChar="\\"}e.DateConverter=n}(TheDatepicker=TheDatepicker||{}),function(o){var r,e;(e=r=r||{})[e.Untouched=0]="Untouched",e[e.Waiting=1]="Waiting",e[e.Ready=2]="Ready",e[e.Initialized=3]="Initialized",e[e.Destroyed=4]="Destroyed";var t=(s.prototype.render=function(){var t=this;switch(this.initializationPhase){case r.Destroyed:return;case r.Initialized:return void this.viewModel.render();case r.Ready:return this.initListeners(),this.initializationPhase=r.Initialized,void this.render();case r.Waiting:return this.options.isHiddenOnBlur()?(this.viewModel.selectPossibleDate(),void this.updateDeselectButton()):void this.open();case r.Untouched:if(this.preselectFromInput(),this.createDeselectElement(),this.viewModel.selectInitialDate(null),this.updateInput(),null!==this.input&&this.options.isHiddenOnBlur())return this.input===this.document.activeElement?(this.initializationPhase=r.Ready,this.render(),void this.open()):(this.inputListenerRemover=o.Helper.addEventListener(this.input,o.ListenerType.Focus,function(e){t.open(e)}),void(this.initializationPhase=r.Waiting));this.initializationPhase=r.Ready,this.render()}},s.prototype.open=function(e){return void 0===e&&(e=null),this.initializationPhase===r.Untouched&&this.render(),this.initializationPhase===r.Waiting&&(this.initializationPhase=r.Ready,this.render(),s.hasClickedViewModel=!0),!!s.activateViewModel(e,this)&&(null!==this.input&&this.input.focus(),!0)},s.prototype.close=function(e){return void 0===e&&(e=null),!this.viewModel.isActive()||!!s.activateViewModel(e,null)&&(null!==this.input&&this.input.blur(),!0)},s.prototype.reset=function(e){return void 0===e&&(e=null),this.viewModel.reset(e)},s.prototype.destroy=function(){if(this.initializationPhase!==r.Destroyed){for(var e=0;e<this.listenerRemovers.length;e++)this.listenerRemovers[e]();this.listenerRemovers=[],this.isContainerExternal?this.container.innerHTML="":this.container.parentNode.removeChild(this.container),(this.container.datepicker=null)!==this.input&&(this.input.datepicker=null,this.removeInitialInputListener(),this.input=null),null!==this.deselectElement&&(this.deselectElement.parentNode.removeChild(this.deselectElement),this.deselectElement=null),this.initializationPhase=r.Destroyed}},s.prototype.selectDate=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=null),this.viewModel.selectDay(n,o.Helper.normalizeDate("Date",e,this.options),t)},s.prototype.getSelectedDate=function(){return null!==this.viewModel.selectedDate?new Date(this.viewModel.selectedDate.getTime()):null},s.prototype.goToMonth=function(e,t){return void 0===t&&(t=null),this.viewModel.goToMonth(t,o.Helper.normalizeDate("Month",e,this.options))},s.prototype.readInput=function(e){if(void 0===e&&(e=null),null===this.input)return!1;try{var t=this.dateConverter.parseDate(this.options.getInputFormat(),this.input.value);return null!==t?this.viewModel.selectNearestDate(e,t):this.viewModel.cancelSelection(e)}catch(e){if(!(e instanceof o.CannotParseDateException))throw e;return!1}},s.prototype.updateInput=function(){null!==this.input&&this.input!==this.document.activeElement&&(this.input.value=null!==this.viewModel.selectedDate?this.dateConverter.formatDate(this.options.getInputFormat(),this.viewModel.selectedDate):"",this.updateDeselectButton())},s.onDatepickerReady=function(e,t){void 0!==e.datepicker&&e.datepicker instanceof s?e.datepicker.triggerReadyListener(t,e):s.readyListeners.push({element:e,callback:t})},s.prototype.createContainer=function(){var e=this.document.createElement("div");return e.className=this.options.getClassesPrefix()+"container",e.style.position="absolute",e.style.zIndex="99",e},s.prototype.createDeselectElement=function(){var t=this;if(null===this.input||!this.options.isDeselectButtonShown())return null;var e=this.document.createElement("span");e.style.position="absolute";var n=this.document.createElement("a");n.innerHTML=this.options.getDeselectHtml(),n.style.position="relative",n.style.left="-0.8em",n.href="#",n.onclick=function(e){e=e||window.event,o.Helper.preventDefault(e),t.viewModel.cancelSelection(e)},e.className=this.options.getClassesPrefix()+"deselect",n.className=this.options.getClassesPrefix()+"deselect-button",e.appendChild(n),this.input.parentNode.insertBefore(e,this.input.nextSibling),this.deselectElement=e},s.prototype.updateDeselectButton=function(){if(null!==this.input&&null!==this.deselectElement){var e=this.options.isDeselectButtonShown()&&""!==this.input.value;this.deselectElement.style.visibility=e?"visible":"hidden"}},s.prototype.preselectFromInput=function(){if(null!==this.input)try{var e=this.dateConverter.parseDate(this.options.getInputFormat(),this.input.value);null!==e&&this.options.setInitialDate(e)}catch(e){if(!(e instanceof o.CannotParseDateException))throw e}},s.prototype.initListeners=function(){var t=this;if(!s.areGlobalListenersInitialized){function e(e){s.hasClickedViewModel?s.hasClickedViewModel=!1:s.activateViewModel(e,null)}o.Helper.addEventListener(this.document,o.ListenerType.MouseDown,e),o.Helper.addEventListener(this.document,o.ListenerType.FocusIn,e),o.Helper.addEventListener(this.document,o.ListenerType.KeyDown,function(e){null!==s.activeViewModel&&s.activeViewModel.triggerKeyPress(e)}),s.areGlobalListenersInitialized=!0}function n(e){s.activateViewModel(e,t),s.hasClickedViewModel=!0}this.removeInitialInputListener(),this.listenerRemovers.push(o.Helper.addEventListener(this.container,o.ListenerType.MouseDown,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.container,o.ListenerType.FocusIn,n)),null!==this.deselectElement&&(this.listenerRemovers.push(o.Helper.addEventListener(this.deselectElement,o.ListenerType.MouseDown,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.deselectElement,o.ListenerType.FocusIn,n))),null!==this.input&&(this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.MouseDown,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.Focus,n)),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.Blur,function(){t.updateInput()})),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.KeyDown,function(e){o.Helper.stopPropagation(e)})),this.listenerRemovers.push(o.Helper.addEventListener(this.input,o.ListenerType.KeyUp,function(e){t.readInput(e)})))},s.prototype.removeInitialInputListener=function(){null!==this.inputListenerRemover&&(this.inputListenerRemover(),this.inputListenerRemover=null)},s.prototype.triggerReady=function(e){for(var t=s.readyListeners.length-1;0<=t;t--){var n=s.readyListeners[t];n.element===e&&(this.triggerReadyListener(n.callback,e),s.readyListeners.splice(t,1))}},s.prototype.triggerReadyListener=function(e,t){e.call(t,this,t)},s.prototype.fixPosition=function(){if(!this.isContainerExternal&&this.options.isPositionFixingEnabled()){for(var e=window.pageYOffset||this.document.documentElement.scrollTop,t=e+(window.innerHeight||Math.max(this.document.documentElement.clientHeight,this.document.body.clientHeight)),n=0,i=this.input;null!==i&&!isNaN(i.offsetLeft)&&!isNaN(i.offsetTop);)n+=i.offsetTop-i.scrollTop,i=i.offsetParent;var o=n+this.input.offsetHeight,r=this.container.offsetHeight,s="",a=r<n-e&&t-o<r;a&&(s=" "+this.options.getClassesPrefix()+"container--over"),this.container.className=this.options.getClassesPrefix()+"container"+s;var l=this.container.childNodes;if(0<l.length){var h=l[0];if(a){var u=this.input.offsetHeight+this.container.offsetHeight;h.style.position="relative",h.style.top="-"+u+"px"}else h.style.position="",h.style.top=""}}},s.activateViewModel=function(e,t){var n=null!==t?t.viewModel:null,i=s.activeViewModel;return!(i!==n&&(null!==i&&!i.setActive(e,!1)||s.activeViewModel===i&&(null===n?s.activeViewModel=null:!n.setActive(e,!0)||(s.activeViewModel!==i||(t.fixPosition(),s.activeViewModel=n),0))))},s.readyListeners=[],s.areGlobalListenersInitialized=!1,s.activeViewModel=null,s.hasClickedViewModel=!1,s);function s(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=null),this.initializationPhase=r.Untouched,this.inputListenerRemover=null,this.listenerRemovers=[],(this.deselectElement=null)!==e&&!o.Helper.isElement(e))throw new Error("Input was expected to be null or an HTMLElement.");if(null!==t&&!o.Helper.isElement(t))throw new Error("Container was expected to be null or an HTMLElement.");if(null===e&&null===t)throw new Error("At least one of input or container is mandatory.");if(null!==n&&!(n instanceof o.Options))throw new Error("Options was expected to be an instance of Options");this.document=document,this.options=null!==n?n.clone():new o.Options;var i="There is already a datepicker present on ";if(this.isContainerExternal=null!==t,null===t)t=this.createContainer(),null!==e&&e.parentNode.insertBefore(t,e.nextSibling);else if(void 0!==t.datepicker)throw new Error(i+"container.");if(null!==e){if(void 0!==e.datepicker)throw new Error(i+"input.");e.datepicker=this,e.autocomplete="off"}(t.datepicker=this).input=e,this.container=t,this.dateConverter=new o.DateConverter(this.options),this.viewModel=new o.ViewModel(this.options,this),this.triggerReady(e),this.triggerReady(t)}o.Datepicker=t,o.onDatepickerReady=t.onDatepickerReady}(TheDatepicker=TheDatepicker||{}),function(t){var e=(n.prototype.getDate=function(){return new Date(this.year,this.month-1,this.dayNumber,0,0,0,0)},n.prototype.getFormatted=function(){return this.year+"-"+("0"+this.month).slice(-2)+"-"+("0"+this.dayNumber).slice(-2)},n.prototype.isEqualToDate=function(e){return null!==e&&this.dayNumber===e.getDate()&&this.month===e.getMonth()+1&&this.year===e.getFullYear()},n.prototype.isEqualToDay=function(e){return null!==e&&this.dayNumber===e.dayNumber&&this.month===e.month&&this.year===e.year},n);function n(e){this.isToday=!1,this.isPast=!1,this.isAvailable=!0,this.isInValidity=!0,this.isInCurrentMonth=!0,this.isSelected=!1,this.isHighlighted=!1,this.isFocused=!1,this.dayNumber=e.getDate(),this.month=e.getMonth()+1,this.year=e.getFullYear(),this.dayOfWeek=e.getDay(),this.isWeekend=this.dayOfWeek===t.DayOfWeek.Saturday||this.dayOfWeek===t.DayOfWeek.Sunday}t.Day=e}(TheDatepicker=TheDatepicker||{}),function(h){var e,t,n,i;(e=h.DayOfWeek||(h.DayOfWeek={}))[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.Sunday=0]="Sunday",(t=h.Month||(h.Month={}))[t.January=0]="January",t[t.February=1]="February",t[t.March=2]="March",t[t.April=3]="April",t[t.May=4]="May",t[t.June=5]="June",t[t.July=6]="July",t[t.August=7]="August",t[t.September=8]="September",t[t.October=9]="October",t[t.November=10]="November",t[t.December=11]="December",(n=h.KeyCode||(h.KeyCode={}))[n.Enter=13]="Enter",n[n.Space=32]="Space",n[n.Left=37]="Left",n[n.Up=38]="Up",n[n.Right=39]="Right",n[n.Down=40]="Down",(i=h.ListenerType||(h.ListenerType={})).MouseDown="mousedown",i.Focus="focus",i.FocusIn="focusin",i.Blur="blur",i.KeyDown="keydown",i.KeyUp="keyup";var o=(u.resetTime=function(e){return null===e?null:(e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e)},u.normalizeDate=function(e,t,n){if(!t)return null;if(t instanceof h.Day)return t.getDate();if("string"==typeof t){if("today"===t||"now"===t)return n.getToday();if("tomorrow"===t){var i=n.getToday();return i.setDate(i.getDate()+1),i}if("yesterday"===t){var o=n.getToday();return o.setDate(o.getDate()-1),o}var r=t.match(/^\s*([+-]?)\s*([0-9]+)\s*(day|month|year)s?\s*$/i);if(null!==r){var s=n.getToday(),a=parseInt(r[2],10)*("-"===r[1]?-1:1);switch(r[3].toLowerCase()){case"day":case"days":s.setDate(s.getDate()+a);break;case"month":case"months":s.setMonth(s.getMonth()+a);break;case"year":case"years":s.setFullYear(s.getFullYear()+a)}return s}var l=new Date(t);if(!isNaN(l.getTime()))return u.resetTime(l)}else if(u.isValidDate(t))return u.resetTime(new Date(t.getTime()));throw new Error(e+" was expected to be a valid Date string or valid Date or Day or null.")},u.normalizeMonth=function(e){if(null===e)return null;var t=new Date(e.getTime());return t.setDate(1),t},u.isElement=function(e){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument},u.isValidDate=function(e){return"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},u.inArray=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1},u.addEventListener=function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n),function(){t.removeEventListener(e,n)};var i="on"+e,o=t[i]||null;return t[i]=function(e){e=e||window.event,null!==o&&o.call(t,e),n(e)},function(){t[i]=o}},u.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},u.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},u.checkString=function(e,t,n){if(void 0===n&&(n=!1),!n&&!t)return"";if("string"!=typeof t||n&&""===t)throw new Error(e+" was expected to be a"+(n?" non empty":"")+" string.");return t},u.checkNumber=function(e,t,n,i){if(void 0===n&&(n=null),void 0===i&&(i=null),"number"!=typeof(t="string"==typeof t?parseInt(t):t)||isNaN(t)||null!==n&&t<n||null!==i&&i<t)throw new Error(e+" was expected to be a valid number"+(null!==n?" from "+n:"")+(null!==i?" to "+i:"")+".");return t},u.checkFunction=function(e,t,n){if(void 0===n&&(n=!0),n&&!t)return null;if("function"!=typeof t)throw new Error(e+" was expected to be a function"+(n?" or null":"")+".");return t},u);function u(){}h.Helper=o}(TheDatepicker=TheDatepicker||{}),function(o){var e=(t.prototype.createDiv=function(e){var t=this.document.createElement("div");return this.addClass(t,e),t},t.prototype.createAnchor=function(t){var e=this.document.createElement("a");return this.addClass(e,"button"),e.href="#",e.onclick=function(e){e=e||window.event,o.Helper.preventDefault(e),t(e)},e.onkeydown=function(e){e=e||window.event,o.Helper.inArray([o.KeyCode.Enter,o.KeyCode.Space],e.keyCode)&&(o.Helper.preventDefault(e),t(e))},e},t.prototype.createSpan=function(){return this.document.createElement("span")},t.prototype.createTable=function(e,t,n){var i=this.document.createElement("table");return this.addClass(i,e),i.appendChild(t),i.appendChild(n),i},t.prototype.createTableHeader=function(e,t){var n=this.document.createElement("thead");this.addClass(n,e);for(var i=this.document.createElement("tr"),o=0;o<t.length;o++)i.appendChild(t[o]);return n.appendChild(i),n},t.prototype.createTableHeaderCell=function(e){var t=this.document.createElement("th");return t.scope="col",this.addClass(t,e),t},t.prototype.createTableBody=function(e,t){var n=this.document.createElement("tbody");this.addClass(n,e);for(var i=0;i<t.length;i++)n.appendChild(t[i]);return n},t.prototype.createTableRow=function(e,t){for(var n=this.document.createElement("tr"),i=0;i<t.length;i++)n.appendChild(t[i]);return n},t.prototype.createTableCell=function(){return this.document.createElement("td")},t.prototype.createSelectInput=function(e,t){var n=this.document.createElement("select");this.addClass(n,"select");for(var i=0;i<e.length;i++)n.appendChild(this.createSelectOption(e[i].value,e[i].label));return n.onchange=function(e){t(e||window.event,n.value)},n.onkeydown=function(e){e=e||window.event,o.Helper.stopPropagation(e)},n},t.prototype.createSelectOption=function(e,t){var n=this.document.createElement("option");return n.value=e,n.innerText=t,n},t.prototype.addClass=function(e,t){t=this.options.getClassesPrefix()+t,""!==e.className&&(t=" "+t),e.className+=t},t);function t(e){this.options=e,this.document=document}o.HtmlHelper=e}(TheDatepicker=TheDatepicker||{}),function(o){var t,e;(e=t=o.EventType||(o.EventType={})).BeforeSelect="beforeSelect",e.Select="select",e.BeforeOpenAndClose="beforeOpenAndClose",e.OpenAndClose="openAndClose",e.MonthChange="monthChange",e.BeforeMonthChange="beforeMonthChange";var n=function(){};o.AvailableDateNotFoundException=n;var i=(r.prototype.clone=function(){var e=new r(this.translator);return e.hideOnBlur=this.hideOnBlur,e.hideOnSelect=this.hideOnSelect,e.minDate=this.minDate,e.maxDate=this.maxDate,e.minMonth=this.minMonth,e.maxMonth=this.maxMonth,e.initialDate=this.initialDate,e.initialMonth=this.initialMonth,e.firstDayOfWeek=this.firstDayOfWeek,e.dateAvailabilityResolver=this.dateAvailabilityResolver,e.cellContentResolver=this.cellContentResolver,e.cellClassesResolver=this.cellClassesResolver,e.inputFormat=this.inputFormat,e.daysOutOfMonthVisible=this.daysOutOfMonthVisible,e.fixedRowsCount=this.fixedRowsCount,e.toggleSelection=this.toggleSelection,e.allowEmpty=this.allowEmpty,e.showDeselectButton=this.showDeselectButton,e.showResetButton=this.showResetButton,e.monthAsDropdown=this.monthAsDropdown,e.yearAsDropdown=this.yearAsDropdown,e.monthAndYearSeparated=this.monthAndYearSeparated,e.classesPrefix=this.classesPrefix,e.showCloseButton=this.showCloseButton,e.title=this.title,e.dropdownItemsLimit=this.dropdownItemsLimit,e.goBackHtml=this.goBackHtml,e.goForwardHtml=this.goForwardHtml,e.closeHtml=this.closeHtml,e.resetHtml=this.resetHtml,e.deselectHtml=this.deselectHtml,e.positionFixing=this.positionFixing,e.listeners.beforeSelect=this.listeners.beforeSelect.slice(0),e.listeners.select=this.listeners.select.slice(0),e.listeners.beforeOpenAndClose=this.listeners.beforeOpenAndClose.slice(0),e.listeners.openAndClose=this.listeners.openAndClose.slice(0),e.listeners.monthChange=this.listeners.monthChange.slice(0),e.listeners.beforeMonthChange=this.listeners.beforeMonthChange.slice(0),e},r.prototype.setHideOnBlur=function(e){this.hideOnBlur=!!e},r.prototype.setHideOnSelect=function(e){this.hideOnSelect=!!e},r.prototype.setMinDate=function(e){var t=o.Helper.normalizeDate("Min date",e,this);this.checkConstraints(t,this.maxDate),this.minDate=t,this.minMonth=o.Helper.normalizeMonth(t)},r.prototype.setMaxDate=function(e){var t=o.Helper.normalizeDate("Max date",e,this);this.checkConstraints(this.minDate,t),this.maxDate=t,this.maxMonth=o.Helper.normalizeMonth(t)},r.prototype.setInitialMonth=function(e){this.initialMonth=o.Helper.normalizeDate("Initial month",e,this)},r.prototype.setInitialDate=function(e){this.initialDate=o.Helper.normalizeDate("Initial date",e,this)},r.prototype.setFirstDayOfWeek=function(e){this.firstDayOfWeek=o.Helper.checkNumber("First day of week",e,0,6)},r.prototype.setDateAvailabilityResolver=function(e){this.dateAvailabilityResolver=o.Helper.checkFunction("Resolver",e)},r.prototype.setCellContentResolver=function(e){this.cellContentResolver=o.Helper.checkFunction("Resolver",e)},r.prototype.setCellClassesResolver=function(e){this.cellClassesResolver=o.Helper.checkFunction("Resolver",e)},r.prototype.setInputFormat=function(e){this.inputFormat=o.Helper.checkString("Input format",e,!0)},r.prototype.setDaysOutOfMonthVisible=function(e){this.daysOutOfMonthVisible=!!e},r.prototype.setFixedRowsCount=function(e){this.fixedRowsCount=!!e},r.prototype.setToggleSelection=function(e){this.toggleSelection=!!e},r.prototype.setShowDeselectButton=function(e){this.showDeselectButton=!!e},r.prototype.setAllowEmpty=function(e){this.allowEmpty=!!e},r.prototype.setShowResetButton=function(e){this.showResetButton=!!e},r.prototype.setMonthAsDropdown=function(e){this.monthAsDropdown=!!e},r.prototype.setYearAsDropdown=function(e){this.yearAsDropdown=!!e},r.prototype.setMonthAndYearSeparated=function(e){this.monthAndYearSeparated=!!e},r.prototype.setClassesPrefix=function(e){this.classesPrefix=o.Helper.checkString("Prefix",e)},r.prototype.setShowCloseButton=function(e){this.showCloseButton=!!e},r.prototype.setTitle=function(e){this.title=o.Helper.checkString("Title",e)},r.prototype.setDropdownItemsLimit=function(e){this.dropdownItemsLimit=o.Helper.checkNumber("Items limit",e,1)},r.prototype.setGoBackHtml=function(e){this.goBackHtml=o.Helper.checkString("Html",e)},r.prototype.setGoForwardHtml=function(e){this.goForwardHtml=o.Helper.checkString("Html",e)},r.prototype.setCloseHtml=function(e){this.closeHtml=o.Helper.checkString("Html",e)},r.prototype.setResetHtml=function(e){this.resetHtml=o.Helper.checkString("Html",e)},r.prototype.setDeselectHtml=function(e){this.deselectHtml=o.Helper.checkString("Html",e)},r.prototype.setPositionFixing=function(e){this.positionFixing=!!e},r.prototype.setToday=function(e){this.today=o.Helper.normalizeDate("Today",e,this)},r.prototype.onBeforeSelect=function(e){this.onEventListener(t.BeforeSelect,e)},r.prototype.offBeforeSelect=function(e){void 0===e&&(e=null),this.offEventListener(t.BeforeSelect,e)},r.prototype.onSelect=function(e){this.onEventListener(t.Select,e)},r.prototype.offSelect=function(e){void 0===e&&(e=null),this.offEventListener(t.Select,e)},r.prototype.onBeforeOpenAndClose=function(e){this.onEventListener(t.BeforeOpenAndClose,e)},r.prototype.offBeforeOpenAndClose=function(e){void 0===e&&(e=null),this.offEventListener(t.BeforeOpenAndClose,e)},r.prototype.onOpenAndClose=function(e){this.onEventListener(t.OpenAndClose,e)},r.prototype.offOpenAndClose=function(e){void 0===e&&(e=null),this.offEventListener(t.OpenAndClose,e)},r.prototype.onBeforeMonthChange=function(e){this.onEventListener(t.BeforeMonthChange,e)},r.prototype.offBeforeMonthChange=function(e){void 0===e&&(e=null),this.offEventListener(t.BeforeMonthChange,e)},r.prototype.onMonthChange=function(e){this.onEventListener(t.MonthChange,e)},r.prototype.offMonthChange=function(e){void 0===e&&(e=null),this.offEventListener(t.MonthChange,e)},r.prototype.getInitialMonth=function(){var e=null!==this.initialDate?new Date(this.initialDate.getTime()):null!==this.initialMonth?new Date(this.initialMonth.getTime()):this.getToday();return e.setDate(1),this.correctMonth(e)},r.prototype.isMonthInValidity=function(e){return null===this.calculateMonthCorrection(e)},r.prototype.correctMonth=function(e){var t=this.calculateMonthCorrection(e);return null!==t?t:e},r.prototype.getInitialDate=function(){return this.findPossibleAvailableDate(this.initialDate)},r.prototype.findPossibleAvailableDate=function(e){if(this.isAllowedEmpty())return null!==e&&this.isDateInValidity(e)&&this.isDateAvailable(e)?new Date(e.getTime()):null;if(e=null!==e?new Date(e.getTime()):this.getToday(),null!==(e=this.findNearestAvailableDate(e)))return e;throw new n},r.prototype.findNearestAvailableDate=function(e){if(e=this.correctDate(e),this.isDateAvailable(e))return e;var t=1e3,n=e,i=new Date(e.getTime());do{if(null!==n)if(n.setDate(n.getDate()+1),null!==this.maxDate&&n.getTime()>this.maxDate.getTime())n=null;else if(this.isDateAvailable(n))return n;if(null!==i)if(i.setDate(i.getDate()-1),null!==this.minDate&&i.getTime()<this.minDate.getTime())i=null;else if(this.isDateAvailable(i))return i;t--}while((null!==n||null!==i)&&0<t);return null},r.prototype.isDateInValidity=function(e){return null===this.calculateDateCorrection(e)},r.prototype.correctDate=function(e){var t=this.calculateDateCorrection(e);return null!==t?t:e},r.prototype.getFirstDayOfWeek=function(){return this.firstDayOfWeek},r.prototype.areDaysOutOfMonthVisible=function(){return this.daysOutOfMonthVisible},r.prototype.hasFixedRowsCount=function(){return this.fixedRowsCount},r.prototype.hasToggleSelection=function(){return this.allowEmpty&&this.toggleSelection},r.prototype.isAllowedEmpty=function(){return this.allowEmpty},r.prototype.isDeselectButtonShown=function(){return this.allowEmpty&&this.showDeselectButton},r.prototype.isResetButtonShown=function(){return this.showResetButton},r.prototype.isMonthAsDropdown=function(){return this.monthAsDropdown},r.prototype.isYearAsDropdown=function(){return this.yearAsDropdown},r.prototype.isMonthAndYearSeparated=function(){return this.monthAndYearSeparated},r.prototype.getClassesPrefix=function(){return this.classesPrefix},r.prototype.isCloseButtonShown=function(){return this.hideOnBlur&&this.showCloseButton},r.prototype.getTitle=function(){return this.title},r.prototype.getMinDate=function(){return this.minDate},r.prototype.getMaxDate=function(){return this.maxDate},r.prototype.getMinMonth=function(){return this.minMonth},r.prototype.getMaxMonth=function(){return this.maxMonth},r.prototype.getDropdownItemsLimit=function(){return this.dropdownItemsLimit},r.prototype.isDateAvailable=function(e){return null===this.dateAvailabilityResolver||!!this.dateAvailabilityResolver(new Date(e.getTime()))},r.prototype.getCellContent=function(e){return null!==this.cellContentResolver?this.cellContentResolver(e):e.dayNumber+""},r.prototype.getCellClasses=function(e){if(null!==this.cellClassesResolver){var t=this.cellClassesResolver(e);if("object"==typeof t&&t.constructor===Array)return t}return[]},r.prototype.getGoBackHtml=function(){return this.goBackHtml},r.prototype.getGoForwardHtml=function(){return this.goForwardHtml},r.prototype.getCloseHtml=function(){return this.closeHtml},r.prototype.getResetHtml=function(){return this.resetHtml},r.prototype.getDeselectHtml=function(){return this.deselectHtml},r.prototype.isHiddenOnBlur=function(){return this.hideOnBlur},r.prototype.isHiddenOnSelect=function(){return this.hideOnBlur&&this.hideOnSelect},r.prototype.getInputFormat=function(){return this.inputFormat},r.prototype.isPositionFixingEnabled=function(){return this.hideOnBlur&&this.positionFixing},r.prototype.getToday=function(){return null!==this.today?new Date(this.today.getTime()):o.Helper.resetTime(new Date)},r.prototype.checkConstraints=function(e,t){if(null!==e&&null!==t&&e.getTime()>t.getTime())throw new Error("Min date cannot be higher then max date.")},r.prototype.calculateMonthCorrection=function(e){var t=this.getMinMonth();if(null!==t&&e.getTime()<t.getTime())return t;var n=this.getMaxMonth();return null!==n&&e.getTime()>n.getTime()?n:null},r.prototype.calculateDateCorrection=function(e){return null!==this.minDate&&e.getTime()<this.minDate.getTime()?new Date(this.minDate.getTime()):null!==this.maxDate&&e.getTime()>this.maxDate.getTime()?new Date(this.maxDate.getTime()):null},r.prototype.onEventListener=function(e,t){this.listeners[e].push(o.Helper.checkFunction("Event listener",t,!1))},r.prototype.offEventListener=function(e,t){if(null===(t=o.Helper.checkFunction("Event listener",t)))this.listeners[e]=[];else{for(var n=[],i=0;i<this.listeners[e].length;i++)this.listeners[e][i]!==t&&n.push(this.listeners[e][i]);this.listeners[e]=n}},r.prototype.triggerEvent=function(e,t){for(var n=0;n<this.listeners[e].length;n++)if(!1===t(this.listeners[e][n]))return!1;return!0},r);function r(e){void 0===e&&(e=null),this.hideOnBlur=!0,this.hideOnSelect=!0,this.minDate=null,this.maxDate=null,this.minMonth=null,this.maxMonth=null,this.initialDate=null,this.initialMonth=null,this.firstDayOfWeek=o.DayOfWeek.Monday,this.dateAvailabilityResolver=null,this.cellContentResolver=null,this.cellClassesResolver=null,this.inputFormat="j. n. Y",this.daysOutOfMonthVisible=!1,this.fixedRowsCount=!1,this.toggleSelection=!1,this.allowEmpty=!0,this.showDeselectButton=!0,this.showResetButton=!1,this.monthAsDropdown=!0,this.yearAsDropdown=!0,this.monthAndYearSeparated=!0,this.classesPrefix="the-datepicker__",this.showCloseButton=!0,this.title="",this.dropdownItemsLimit=200,this.goBackHtml="&lt;",this.goForwardHtml="&gt;",this.closeHtml="&times;",this.resetHtml="&olarr;",this.deselectHtml="&times;",this.positionFixing=!0,this.today=null,this.listeners={beforeSelect:[],select:[],beforeOpenAndClose:[],openAndClose:[],monthChange:[],beforeMonthChange:[]},this.translator=null!==e?e:new o.Translator}o.Options=i}(TheDatepicker=TheDatepicker||{}),function(a){var t,e;(e=t=a.MoveDirection||(a.MoveDirection={}))[e.Left=-1]="Left",e[e.Up=-7]="Up",e[e.Right=1]="Right",e[e.Down=7]="Down";var n=(i.prototype.render=function(){if(!this.selectPossibleDate()){var e=this.options.correctMonth(this.getCurrentMonth());this.goToMonth(null,e)||(this.template.render(this),this.datepicker.updateInput())}},i.prototype.setActive=function(e,t){return this.active===t||!!this.triggerOnBeforeOpenAndClose(e,t)&&(this.active=t,this.options.isHiddenOnBlur()&&this.render(),this.triggerOnOpenAndClose(e,t),!0)},i.prototype.isActive=function(){return this.active},i.prototype.close=function(e){return this.datepicker.close(e)},i.prototype.getCurrentMonth=function(){return null===this.currentMonth&&(this.currentMonth=this.options.getInitialMonth()),this.currentMonth},i.prototype.canGoBack=function(){var e=new Date(this.getCurrentMonth().getTime());return e.setMonth(e.getMonth()-1),this.canGoToMonth(e)},i.prototype.canGoForward=function(){var e=new Date(this.getCurrentMonth().getTime());return e.setMonth(e.getMonth()+1),this.canGoToMonth(e)},i.prototype.canGoToMonth=function(e){return this.options.isMonthInValidity(e)},i.prototype.goBack=function(e){var t=new Date(this.getCurrentMonth().getTime());return t.setMonth(t.getMonth()-1),this.goToMonth(e,t)},i.prototype.goForward=function(e){var t=new Date(this.getCurrentMonth().getTime());return t.setMonth(t.getMonth()+1),this.goToMonth(e,t)},i.prototype.goToMonth=function(e,t,n){return void 0===n&&(n=!0),(t=a.Helper.resetTime(new Date(t.getTime()))).setDate(1),!(t.getTime()===this.getCurrentMonth().getTime()||!this.canGoToMonth(t)||!this.triggerOnBeforeMonthChange(e,t,this.currentMonth)||(this.currentMonth=t,n&&this.cancelHighlight()||this.render(),this.triggerOnMonthChange(e,t,this.currentMonth),0))},i.prototype.reset=function(e){var t=this.goToMonth(e,this.options.getInitialMonth()),n=this.selectInitialDate(e);return t||n},i.prototype.selectDay=function(e,t,n,i,o){if(void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o=!1),null===t)return this.cancelSelection(e);var r;if(t instanceof a.Day?t=(r=t).getDate():r=this.createDay(t),!r.isAvailable)return!1;if(r.isEqualToDate(this.selectedDate))return!(!o||!this.options.hasToggleSelection())&&this.cancelSelection(e);var s=null!==this.selectedDate?this.createDay(this.selectedDate):null;return!!this.triggerOnBeforeSelect(e,r,s)&&(this.selectedDate=r.getDate(),i&&(this.highlightedDay=r,this.isHighlightedDayFocused=!0),n&&this.goToMonth(e,t)||this.render(),this.triggerOnSelect(e,r,s),!0)},i.prototype.selectNearestDate=function(e,t){return this.selectDay(e,this.options.findNearestAvailableDate(t))},i.prototype.selectPossibleDate=function(){try{return this.selectDay(null,this.options.findPossibleAvailableDate(this.selectedDate),!1)}catch(e){if(!(e instanceof a.AvailableDateNotFoundException))throw e;return this.cancelSelection(null,!0)}},i.prototype.selectInitialDate=function(e){try{return this.selectDay(e,this.options.getInitialDate(),!1)}catch(e){if(!(e instanceof a.AvailableDateNotFoundException))throw e;return this.cancelSelection(null,!0)}},i.prototype.highlightDay=function(e,t,n){if(void 0===n&&(n=!1),!t.isAvailable)return!1;if(t.isEqualToDay(this.highlightedDay))return!1;this.highlightedDay=t,this.isHighlightedDayFocused=!0;var i=t.getDate();return n&&this.goToMonth(e,i,!1)||this.render(),!0},i.prototype.highlightFirstAvailableDay=function(e){for(var t=new Date(this.getCurrentMonth().getTime()),n=this.options.getMaxDate(),i=this.createDay(t);!(i.isAvailable||(t.setDate(i.dayNumber+1),1===t.getDate())||null!==n&&t.getTime()>n.getTime());)i=this.createDay(t);return this.highlightDay(e,i)},i.prototype.highlightSiblingDay=function(e,t,n){var i=t,o=i.getDate(),r=1e3;do{if(o.setDate(i.dayNumber+n),!(i=this.createDay(o)).isInValidity)break;r--}while(!i.isAvailable&&0<r);return this.highlightDay(e,i,!0)},i.prototype.cancelSelection=function(e,t){if(void 0===t&&(t=!1),!this.options.isAllowedEmpty()&&!t)return!1;if(null===this.selectedDate)return!1;var n=this.createDay(this.selectedDate);return!!this.triggerOnBeforeSelect(e,null,n)&&(this.selectedDate=null,this.render(),this.triggerOnSelect(e,null,n),!0)},i.prototype.cancelHighlight=function(){return null!==this.highlightedDay&&(this.highlightedDay=null,this.render(),!0)},i.prototype.getWeekDays=function(){for(var e=[],t=0;t<7;t++)e.push((this.options.getFirstDayOfWeek()+t)%7);return e},i.prototype.getWeeks=function(){var e,t=[],n=this.getCurrentMonth(),i=new Date(n.getFullYear(),n.getMonth(),1),o=new Date(n.getFullYear(),n.getMonth(),0).getDate();for(e=o-(i.getDay()-this.options.getFirstDayOfWeek()+7)%7+1;e<=o;e++)(h=this.createDay(new Date(n.getFullYear(),n.getMonth()-1,e))).isInCurrentMonth=!1,t.push(h);var r=new Date(n.getFullYear(),n.getMonth()+1,0),s=r.getDate();for(e=1;e<=s;e++)t.push(this.createDay(new Date(n.getFullYear(),n.getMonth(),e)));var a=6-(r.getDay()-this.options.getFirstDayOfWeek()+7)%7;for(e=1;e<=a;e++)(h=this.createDay(new Date(n.getFullYear(),n.getMonth()+1,e))).isInCurrentMonth=!1,t.push(h);if(this.options.hasFixedRowsCount())for(var l=1+a;t.length<42;l++){var h;(h=this.createDay(new Date(n.getFullYear(),n.getMonth()+1,l))).isInCurrentMonth=!1,t.push(h)}for(var u=[],p=0;p<t.length;p+=7)u.push(t.slice(p,p+7));return u},i.prototype.triggerKeyPress=function(e){a.Helper.inArray([a.KeyCode.Left,a.KeyCode.Up,a.KeyCode.Right,a.KeyCode.Down],e.keyCode)&&(a.Helper.preventDefault(e),null!==this.highlightedDay?this.highlightSiblingDay(e,this.highlightedDay,this.translateKeyCodeToMoveDirection(e.keyCode)):null!==this.selectedDate&&this.selectedDate.getFullYear()===this.getCurrentMonth().getFullYear()&&this.selectedDate.getMonth()===this.getCurrentMonth().getMonth()?this.highlightSiblingDay(e,this.createDay(this.selectedDate),this.translateKeyCodeToMoveDirection(e.keyCode)):this.highlightFirstAvailableDay(e))},i.prototype.triggerOnBeforeSelect=function(t,n,i){var o=this;return this.options.triggerEvent(a.EventType.BeforeSelect,function(e){return e.call(o.datepicker,t,n,i)})},i.prototype.triggerOnSelect=function(t,n,i){var o=this;this.options.triggerEvent(a.EventType.Select,function(e){return e.call(o.datepicker,t,n,i)})},i.prototype.triggerOnBeforeOpenAndClose=function(t,n){var i=this;return this.options.triggerEvent(a.EventType.BeforeOpenAndClose,function(e){return e.call(i.datepicker,t,n)})},i.prototype.triggerOnOpenAndClose=function(t,n){var i=this;this.options.triggerEvent(a.EventType.OpenAndClose,function(e){return e.call(i.datepicker,t,n)})},i.prototype.triggerOnBeforeMonthChange=function(t,n,i){var o=this;return this.options.triggerEvent(a.EventType.BeforeMonthChange,function(e){return e.call(o.datepicker,t,n,i)})},i.prototype.triggerOnMonthChange=function(t,n,i){var o=this;this.options.triggerEvent(a.EventType.MonthChange,function(e){return e.call(o.datepicker,t,n,i)})},i.prototype.createDay=function(e){e=a.Helper.resetTime(new Date(e.getTime()));var t=this.options.getToday(),n=new a.Day(e);return n.isToday=e.getTime()===t.getTime(),n.isPast=e.getTime()<t.getTime(),n.isInValidity=this.options.isDateInValidity(e),n.isAvailable=n.isInValidity&&this.options.isDateAvailable(e),n.isAvailable&&(n.isEqualToDate(this.selectedDate)&&(n.isSelected=!0),n.isEqualToDay(this.highlightedDay)&&(n.isHighlighted=!0,this.isHighlightedDayFocused&&(n.isFocused=!0,this.isHighlightedDayFocused=!1))),n},i.prototype.translateKeyCodeToMoveDirection=function(e){switch(e){case a.KeyCode.Left:return t.Left;case a.KeyCode.Up:return t.Up;case a.KeyCode.Right:return t.Right;case a.KeyCode.Down:return t.Down;default:throw new Error("Invalid key code: "+e)}},i);function i(e,t){this.options=e,this.datepicker=t,this.selectedDate=null,this.currentMonth=null,this.highlightedDay=null,this.isHighlightedDayFocused=!1,this.active=!1,this.template=new a.Template(this.options,new a.HtmlHelper(this.options),t.container,null!==t.input)}a.ViewModel=n}(TheDatepicker=TheDatepicker||{}),function(i){var e=(t.prototype.render=function(e){if(null===this.mainElement){if(this.hasInput&&this.options.isHiddenOnBlur()&&!e.isActive())return;this.container.innerHTML="",this.container.appendChild(this.createSkeleton(e))}this.updateMainElement(e),this.updateTopElement(e),this.updateTitleElement(e),this.updateCloseElement(e),this.updateResetElement(e),this.updateGoBackElement(e),this.updateGoForwardElement(e),this.updateMonthElement(e),this.updateYearElement(e),this.updateMonthAndYearElement(e),this.updateWeeksElements(e)},t.prototype.createSkeleton=function(e){var t=this.htmlHelper.createDiv("main");return t.appendChild(this.createHeaderElement(e)),t.appendChild(this.createBodyElement(e)),this.mainElement=t},t.prototype.updateMainElement=function(e){this.mainElement.style.display=this.hasInput&&!e.isActive()&&this.options.isHiddenOnBlur()?"none":""},t.prototype.createBodyElement=function(e){var t=this.htmlHelper.createDiv("body");return t.appendChild(this.createTableElement(e)),t},t.prototype.createHeaderElement=function(e){var t=this.htmlHelper.createDiv("header"),n=this.htmlHelper.createDiv("top");t.appendChild(n),n.appendChild(this.createTitleElement(e));var i=this.htmlHelper.createDiv("control");n.appendChild(i),i.appendChild(this.createResetElement(e)),i.appendChild(this.createCloseElement(e));var o=this.htmlHelper.createDiv("navigation");t.appendChild(o),o.appendChild(this.createGoBackElement(e));var r=this.htmlHelper.createDiv("state");return o.appendChild(r),this.options.isMonthAndYearSeparated()?(r.appendChild(this.createMonthElement(e)),r.appendChild(this.createYearElement(e))):r.appendChild(this.createMonthAndYearElement(e)),o.appendChild(this.createGoForwardElement(e)),this.controlElement=i,t},t.prototype.updateTopElement=function(e){var t=""!==this.options.getTitle()||this.options.isResetButtonShown()||this.hasInput&&this.options.isCloseButtonShown();this.controlElement.style.display=t?"":"none",this.titleElement.style.display=t?"":"none"},t.prototype.createTitleElement=function(e){var t=this.htmlHelper.createDiv("title"),n=this.htmlHelper.createSpan();return t.appendChild(n),this.htmlHelper.addClass(n,"title-content"),this.titleElement=t,this.titleContentElement=n,t},t.prototype.updateTitleElement=function(e){var t=this.options.getTitle();this.titleContentElement.style.display=""!==t?"":"none",this.titleContentElement.innerText=t},t.prototype.createResetElement=function(t){var e=this.htmlHelper.createDiv("reset"),n=this.htmlHelper.createAnchor(function(e){t.reset(e)});return n.innerHTML=this.options.getResetHtml(),e.appendChild(n),this.resetElement=e},t.prototype.updateResetElement=function(e){this.resetElement.style.display=this.options.isResetButtonShown()?"":"none"},t.prototype.createCloseElement=function(t){var e=this.htmlHelper.createDiv("close"),n=this.htmlHelper.createAnchor(function(e){t.close(e)});return n.innerHTML=this.options.getCloseHtml(),e.appendChild(n),this.closeElement=e},t.prototype.updateCloseElement=function(e){this.closeElement.style.display=this.hasInput&&this.options.isCloseButtonShown()?"":"none"},t.prototype.createGoBackElement=function(e){return this.createGoElement(e,!1)},t.prototype.createGoForwardElement=function(e){return this.createGoElement(e,!0)},t.prototype.createGoElement=function(t,n){var e=this.htmlHelper.createDiv("go");this.htmlHelper.addClass(e,n?"go-next":"go-previous");var i=this.htmlHelper.createAnchor(function(e){n?t.goForward(e):t.goBack(e)});return i.innerHTML=n?this.options.getGoForwardHtml():this.options.getGoBackHtml(),e.appendChild(i),n?this.goForwardElement=i:this.goBackElement=i,e},t.prototype.updateGoBackElement=function(e){this.goBackElement.style.visibility=e.canGoBack()?"visible":"hidden"},t.prototype.updateGoForwardElement=function(e){this.goForwardElement.style.visibility=e.canGoForward()?"visible":"hidden"},t.prototype.createMonthElement=function(o){for(var r=this,e=[],t=0;t<12;t++)e.push({value:t+"",label:this.options.translator.translateMonth(t)});var n=this.htmlHelper.createSelectInput(e,function(e,t){var n=o.getCurrentMonth(),i=new Date(n.getTime());i.setMonth(parseInt(t,10)),o.goToMonth(e,i)||(r.monthSelect.value=n.getMonth()+"")}),i=this.htmlHelper.createDiv("month"),s=this.htmlHelper.createSpan();return i.appendChild(n),i.appendChild(s),this.monthElement=s,this.monthSelect=n,i},t.prototype.updateMonthElement=function(e){if(null!==this.monthElement){var t=e.getCurrentMonth().getMonth();if(this.monthElement.innerText=this.options.translator.translateMonth(t),!this.options.isMonthAsDropdown())return this.monthSelect.style.display="none",void(this.monthElement.style.display="");for(var n=0,i=0;i<12;i++){var o=new Date(e.getCurrentMonth().getTime());o.setMonth(i);var r=this.monthSelect.getElementsByTagName("option")[i],s=e.canGoToMonth(o);r.disabled=!s,r.style.display=s?"":"none",n+=s?1:0}this.monthSelect.value=t+"",this.monthSelect.style.display=1<n?"":"none",this.monthElement.style.display=1<n?"none":""}},t.prototype.createYearElement=function(s){var a=this,e=this.htmlHelper.createSelectInput([],function(e,t){var n=s.getCurrentMonth(),i=new Date(n.getTime());i.setFullYear(parseInt(t,10));var o=a.options.getMinMonth(),r=a.options.getMaxMonth();null!==o&&i.getTime()<o.getTime()&&(i=o),null!==r&&i.getTime()>r.getTime()&&(i=r),s.goToMonth(e,i)||(a.yearSelect.value=n.getFullYear()+"")}),t=this.htmlHelper.createDiv("year"),n=this.htmlHelper.createSpan();return t.appendChild(e),t.appendChild(n),this.yearElement=n,this.yearSelect=e,t},t.prototype.updateYearElement=function(e){if(null!==this.yearElement){var t=e.getCurrentMonth().getFullYear();if(this.yearElement.innerText=t+"",!this.options.isYearAsDropdown())return this.yearSelect.style.display="none",void(this.yearElement.style.display="");for(var n=this.options.getMinDate(),i=this.options.getMaxDate(),o=null!==n?n.getFullYear():null,r=null!==i?i.getFullYear():null,s=this.calculateDropdownRange(t,o,r),a=this.yearSelect.getElementsByTagName("option"),l=this.calculateDropdownDiff(a,s,function(e){return parseInt(e,10)}),h=0;h<l.remove.length;h++)this.yearSelect.removeChild(l.remove[h]);for(h=l.prepend.length-1;0<=h;h--)this.yearSelect.insertBefore(this.htmlHelper.createSelectOption(l.prepend[h]+"",l.prepend[h]+""),this.yearSelect.firstChild);for(h=0;h<l.append.length;h++)this.yearSelect.appendChild(this.htmlHelper.createSelectOption(l.append[h]+"",l.append[h]+""));this.yearSelect.value=t+"",this.yearSelect.style.display=s.from<s.to?"":"none",this.yearElement.style.display=s.from<s.to?"none":""}},t.prototype.createMonthAndYearElement=function(r){var s=this,e=this.htmlHelper.createDiv("month-year"),t=this.htmlHelper.createSelectInput([],function(e,t){var n=r.getCurrentMonth(),i=new Date(n.getTime()),o=s.parseMonthAndYearOptionValue(t);i.setFullYear(o.year),i.setMonth(o.month),r.goToMonth(e,i)||(s.monthAndYearSelect.value=s.getMonthAndYearOptionValue({month:n.getMonth(),year:n.getFullYear()}))}),n=this.htmlHelper.createSpan();return this.monthAndYearElement=n,this.monthAndYearSelect=t,e.appendChild(n),e.appendChild(t),e},t.prototype.updateMonthAndYearElement=function(e){var t=this;if(null!==this.monthAndYearElement){var n=e.getCurrentMonth(),i={month:n.getMonth(),year:n.getFullYear()},o=this.calculateMonthAndYearIndex(i);if(this.monthAndYearElement.innerText=this.translateMonthAndYear(i),!this.options.isYearAsDropdown()||!this.options.isMonthAsDropdown())return this.monthAndYearSelect.style.display="none",void(this.monthAndYearElement.style.display="");for(var r=this.options.getMinDate(),s=this.options.getMaxDate(),a=null!==r?12*r.getFullYear()+r.getMonth():null,l=null!==s?12*s.getFullYear()+s.getMonth():null,h=this.calculateDropdownRange(o,a,l),u=this.monthAndYearSelect.getElementsByTagName("option"),p=this.calculateDropdownDiff(u,h,function(e){return t.calculateMonthAndYearIndex(t.parseMonthAndYearOptionValue(e))}),c=0;c<p.remove.length;c++)this.monthAndYearSelect.removeChild(p.remove[c]);for(c=p.prepend.length-1;0<=c;c--){var d=this.getMonthAndYearByIndex(p.prepend[c]);this.monthAndYearSelect.insertBefore(this.htmlHelper.createSelectOption(this.getMonthAndYearOptionValue(d),this.translateMonthAndYear(d)),this.monthAndYearSelect.firstChild)}for(c=0;c<p.append.length;c++)d=this.getMonthAndYearByIndex(p.append[c]),this.monthAndYearSelect.appendChild(this.htmlHelper.createSelectOption(this.getMonthAndYearOptionValue(d),this.translateMonthAndYear(d)));this.monthAndYearSelect.value=this.getMonthAndYearOptionValue(i),this.monthAndYearSelect.style.display=h.from<h.to?"":"none",this.monthAndYearElement.style.display=h.from<h.to?"none":""}},t.prototype.translateMonthAndYear=function(e){return this.options.translator.translateMonth(e.month)+" "+e.year},t.prototype.calculateMonthAndYearIndex=function(e){return 12*e.year+e.month},t.prototype.getMonthAndYearByIndex=function(e){return{year:Math.floor(e/12),month:e%12}},t.prototype.getMonthAndYearOptionValue=function(e){return e.year+"-"+e.month},t.prototype.parseMonthAndYearOptionValue=function(e){var t=e.split("-");return{month:parseInt(t[1],10),year:parseInt(t[0],10)}},t.prototype.calculateDropdownRange=function(e,t,n){var i=this.options.getDropdownItemsLimit()-1,o=Math.ceil(i/2),r=e-(i-o),s=e+o;return null!==t&&r<t?(s+=t-r,null!==n&&n<s&&(s=n),r=t):null!==n&&n<s&&(r-=s-n,null!==t&&r<t&&(r=t),s=n),{from:r,to:s}},t.prototype.calculateDropdownDiff=function(e,t,n){for(var i=0<e.length?n(e[0].value):null,o=0<e.length?n(e[e.length-1].value):null,r=[],s=[],a=[],l=t.from;l<=t.to;l++)null===i||l<i?r.push(l):o<l&&s.push(l);for(var h=0;h<e.length;h++)((l=n(e[h].value))<t.from||l>t.to)&&a.push(e[h]);return{prepend:r,append:s,remove:a}},t.prototype.createTableElement=function(e){var t=this.createTableHeaderElement(e),n=this.createTableBodyElement(e);return this.htmlHelper.createTable("calendar",t,n)},t.prototype.createTableHeaderElement=function(e){for(var t=e.getWeekDays(),n=[],i=0;i<t.length;i++){var o=t[i];n.push(this.createTableHeaderCellElement(e,o))}return this.htmlHelper.createTableHeader("calendar-header",n)},t.prototype.createTableHeaderCellElement=function(e,t){var n=this.htmlHelper.createTableHeaderCell("week-day");return t!==i.DayOfWeek.Saturday&&t!==i.DayOfWeek.Sunday||this.htmlHelper.addClass(n,"week-day--weekend"),n.innerText=this.options.translator.translateDayOfWeek(t),n},t.prototype.createTableBodyElement=function(e){this.daysElements=[],this.daysButtonsElements=[],this.daysContentsElements=[];for(var t=[],n=0;n<6;n++)t.push(this.createTableRowElement(e));return this.weeksElements=t,this.htmlHelper.createTableBody("calendar-body",t)},t.prototype.updateWeeksElements=function(e){for(var t=e.getWeeks(),n=0;n<this.weeksElements.length;n++){var i=this.weeksElements[n],o=t.length>n?t[n]:null;if(i.style.display=null!==o?"":"none",null!==o)for(var r=0;r<this.daysElements[n].length;r++)this.updateDayElement(e,this.daysElements[n][r],this.daysButtonsElements[n][r],this.daysContentsElements[n][r],o[r])}},t.prototype.createTableRowElement=function(e){for(var t=[],n=[],i=[],o=0;o<7;o++){var r=this.htmlHelper.createTableCell(),s=this.createTableCellButtonElement(e),a=this.createTableCellContentElement(e);t.push(r),n.push(s),i.push(a),r.appendChild(s),s.appendChild(a)}return this.daysElements.push(t),this.daysButtonsElements.push(n),this.daysContentsElements.push(i),this.htmlHelper.createTableRow("week",t)},t.prototype.updateDayElement=function(e,t,n,i,o){if(n.day=o,t.setAttribute("data-date",o.getFormatted()),t.className="",this.htmlHelper.addClass(t,"cell"),!o.isInCurrentMonth&&!this.options.areDaysOutOfMonthVisible())return i.innerHTML="&nbsp;",n.removeAttribute("href"),void(n.style.visibility="hidden");this.htmlHelper.addClass(t,"day"),o.isToday&&this.htmlHelper.addClass(t,"day--today"),o.isPast&&this.htmlHelper.addClass(t,"day--past"),o.isWeekend&&this.htmlHelper.addClass(t,"day--weekend"),o.isAvailable||this.htmlHelper.addClass(t,"day--unavailable"),o.isInCurrentMonth||this.htmlHelper.addClass(t,"day--outside"),o.isHighlighted&&this.htmlHelper.addClass(t,"day--highlighted"),o.isSelected&&this.htmlHelper.addClass(t,"day--selected");for(var r=this.options.getCellClasses(o),s=0;s<r.length;s++)t.className+=" "+r[s];n.style.visibility="visible",i.innerText=this.options.getCellContent(o),o.isAvailable?n.href="#":n.removeAttribute("href"),o.isFocused&&n.focus()},t.prototype.createTableCellButtonElement=function(i){var o=this,r=this.htmlHelper.createAnchor(function(e){var t=i.selectedDate,n=i.selectDay(e,r.day,!1,!0,!0);o.options.isHiddenOnSelect()&&(n||null!==t&&r.day.isEqualToDate(t))&&i.close(e)});return r.onfocus=function(e){i.highlightDay(e||window.event,r.day)},r.onmouseenter=function(){i.cancelHighlight()},r.onmouseleave=function(){i.cancelHighlight()},r},t.prototype.createTableCellContentElement=function(e){var t=this.htmlHelper.createSpan();return this.htmlHelper.addClass(t,"day-content"),t},t);function t(e,t,n,i){this.options=e,this.htmlHelper=t,this.container=n,this.hasInput=i,this.mainElement=null,this.controlElement=null,this.goBackElement=null,this.goForwardElement=null,this.titleElement=null,this.titleContentElement=null,this.resetElement=null,this.closeElement=null,this.monthSelect=null,this.monthElement=null,this.yearSelect=null,this.yearElement=null,this.monthAndYearSelect=null,this.monthAndYearElement=null,this.weeksElements=[],this.daysElements=[],this.daysButtonsElements=[],this.daysContentsElements=[]}i.Template=e}(TheDatepicker=TheDatepicker||{});